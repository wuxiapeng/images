<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black">

    <!-- 1. 顶部可折叠区域 (Header) -->
    <com.google.android.material.appbar.AppBarLayout
        android:id="@+id/appBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="@color/black">

        <com.google.android.material.appbar.CollapsingToolbarLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            app:layout_scrollFlags="scroll|exitUntilCollapsed">

            <!-- 真正的内容容器 -->
            <!-- 替换 CollapsingToolbarLayout 内部的 LinearLayout -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingStart="20dp"
                android:paddingTop="50dp"
                android:paddingEnd="20dp"
                android:paddingBottom="20dp">

                <!-- 第一部分：【头像】在左，【名字ID】在右 -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center_vertical"
                    android:orientation="horizontal"> <!-- 让文字垂直居中对齐头像 -->

                    <!-- 头像 -->
                    <ImageView
                        android:id="@+id/ivAvatar"
                        android:layout_width="88dp"
                        android:layout_height="88dp"
                        android:src="@android:drawable/sym_def_app_icon"
                        android:background="@drawable/ic_launcher_foreground"/>

                    <!-- 右侧文字容器 -->
                    <LinearLayout
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginStart="20dp"
                        android:orientation="vertical"> <!-- 头像和文字的间距 -->

                        <!-- 昵称 (大字) -->
                        <TextView
                            android:id="@+id/tvNickname"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Android User"
                            android:textColor="@android:color/white"
                            android:textSize="20sp"
                            android:textStyle="bold" />

                        <!-- ID (小字，灰色) -->
                        <TextView
                            android:id="@+id/tvUsername"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginTop="4dp"
                            android:text="ID: 9527_coding"
                            android:textColor="#CCCCCC"
                            android:textSize="14sp" />
                    </LinearLayout>
                </LinearLayout>

                <!-- 第二部分：简介 (左对齐) -->
                <TextView
                    android:id="@+id/tvDesc"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="16dp"
                    android:lineSpacingExtra="4dp"
                    android:text="专注分享日常 | 喜欢用镜头记录生活"
                    android:textColor="@android:color/white"
                    android:textSize="14sp" />

                <!-- 第三部分：数据栏 (获赞 | 关注 | 粉丝) -->
                <!-- 去掉了 gravity="center"，默认就是左对齐 -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="16dp"
                    android:orientation="horizontal">

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginEnd="20dp"
                        android:text="128 获赞"
                        android:textColor="@android:color/white"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginEnd="20dp"
                        android:text="24 关注"
                        android:textColor="@android:color/white"
                        android:textStyle="bold" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="1024 粉丝"
                        android:textColor="@android:color/white"
                        android:textStyle="bold" />
                </LinearLayout>

                <!-- 按钮区域容器 -->
                <FrameLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="20dp">

                    <!-- 模式 A: 只有【编辑资料】 (默认显示) -->
                    <Button
                        android:id="@+id/btnEditProfile"
                        android:layout_width="match_parent"
                        android:layout_height="38dp"
                        android:text="编辑资料"
                        android:textColor="@android:color/white"
                        android:textSize="14sp"
                        android:backgroundTint="#333333"
                        app:cornerRadius="4dp" />

                    <!-- 模式 B: 【关注】+【私信】 (默认隐藏 visibility="gone") -->
                    <LinearLayout
                        android:id="@+id/llFollowAction"
                        android:layout_width="match_parent"
                        android:layout_height="44dp"
                        android:orientation="horizontal"
                        android:visibility="gone">

                        <!-- 关注按钮 (红色) -->
                        <Button
                            android:id="@+id/btnFollow"
                            android:layout_width="0dp"
                            android:layout_height="match_parent"
                            android:layout_weight="1"
                            android:layout_marginEnd="6dp"
                            android:text="关注"
                            android:textColor="@android:color/white"
                            android:textSize="16sp"
                            android:textStyle="bold"
                            android:backgroundTint="#FE2C55"
                            app:cornerRadius="4dp" />

                        <!-- 私信按钮 (灰色) -->
                        <Button
                            android:id="@+id/btnMessage"
                            android:layout_width="0dp"
                            android:layout_height="match_parent"
                            android:layout_weight="1"
                            android:layout_marginStart="6dp"
                            android:text="发私信"
                            android:textColor="@android:color/white"
                            android:textSize="14sp"
                            android:backgroundTint="#333333"
                            app:cornerRadius="4dp" />

                        <!-- (可选) 还可以加一个小方块按钮放更多选项 -->
                    </LinearLayout>
                </FrameLayout>

            </LinearLayout>

        </com.google.android.material.appbar.CollapsingToolbarLayout>

        <!-- 2. 吸顶标签栏 (Tab) -->
        <!-- 当向上滑动时，这个部分会卡在屏幕顶部 -->
        <com.google.android.material.tabs.TabLayout
            android:id="@+id/tabLayout"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:background="@color/black"
            app:tabIndicatorColor="@android:color/holo_orange_light"
            app:tabSelectedTextColor="@android:color/white"
            app:tabTextColor="#888888">

            <com.google.android.material.tabs.TabItem
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="作品" />

            <com.google.android.material.tabs.TabItem
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="私密" />

            <com.google.android.material.tabs.TabItem
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="喜欢" />
        </com.google.android.material.tabs.TabLayout>

    </com.google.android.material.appbar.AppBarLayout>

    <!-- 3. 底部滑动列表 (Grid) -->
    <!-- app:layout_behavior 这一行是关键，让它能配合 Header 滑动 -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/rvProfileVideo"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior" />

</androidx.coordinatorlayout.widget.CoordinatorLayout>